{"ast":null,"code":"var _excluded = [\"fullText\", \"ellipsis\", \"availableWidth\"];\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { CanvasTextUtils } from '../../services/canvas';\n/**\n * Utilities for truncating types at various positions, as well as\n * determining whether truncation is possible or even necessary.\n */\nexport var TruncationUtils = /*#__PURE__*/function (_CanvasTextUtils) {\n  _inherits(TruncationUtils, _CanvasTextUtils);\n  var _super = _createSuper(TruncationUtils);\n  function TruncationUtils(_ref) {\n    var _this;\n    var fullText = _ref.fullText,\n      ellipsis = _ref.ellipsis,\n      _availableWidth = _ref.availableWidth,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, TruncationUtils);\n    _this = _super.call(this, rest);\n    _defineProperty(_assertThisInitialized(_this), \"fullText\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"ellipsis\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"availableWidth\", void 0);\n    /**\n     * Performance utilities\n     */\n    _defineProperty(_assertThisInitialized(_this), \"debugPerformance\", false);\n    _defineProperty(_assertThisInitialized(_this), \"debugCounter\", 0);\n    /**\n     * Internal utils for calculating a ratio based on the passed available width\n     * vs the full text width.\n     * This ratio is used to get an initial _approximate_ text string that should\n     * be slightly over the available width, which we can then remove from\n     * character-by-character until the text just fits within the available width.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"widthRatio\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"setTextWidthRatio\", function () {\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.fullText;\n      var textToOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      // Account for reduced available width due to (e.g.) truncation offset\n      var availableWidth = _this.availableWidth;\n      if (textToOffset) {\n        _this.setTextToCheck(textToOffset);\n        availableWidth = availableWidth - _this.textWidth;\n      }\n      _this.setTextToCheck(text);\n      _this.widthRatio = availableWidth / _this.textWidth;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getTextFromRatio\", function (text, type) {\n      var characterRatio = Math.ceil(text.length * _this.widthRatio);\n      var index = type === 'start' ? text.length - characterRatio : characterRatio;\n      var _splitText$at = splitText(text).at(index),\n        _splitText$at2 = _slicedToArray(_splitText$at, 2),\n        end = _splitText$at2[0],\n        start = _splitText$at2[1];\n      return type === 'start' ? start : end;\n    });\n    /**\n     * Early return checks\n     */\n    _defineProperty(_assertThisInitialized(_this), \"checkIfTruncationIsNeeded\", function () {\n      _this.setTextToCheck(_this.fullText);\n      if (_this.availableWidth >= _this.textWidth) {\n        return false;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"checkSufficientEllipsisWidth\", function (truncation) {\n      var textToCheck = truncation === 'startEnd' ? \"\".concat(_this.ellipsis, \" \").concat(_this.ellipsis) // startEnd needs a little more space\n      : _this.ellipsis;\n      _this.setTextToCheck(textToCheck);\n      if (_this.textWidth >= _this.availableWidth * 0.9) {\n        console.error('The truncation ellipsis is larger than the available width. No text can be rendered.');\n        return false;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"checkTruncationOffsetWidth\", function (text) {\n      _this.setTextToCheck(text);\n      if (_this.textWidth > _this.availableWidth) {\n        console.error('The passed truncationOffset is too large for the available width. Truncating the offset instead.');\n        return false;\n      }\n    });\n    /**\n     * Truncation types logic. This is where the magic happens\n     */\n    _defineProperty(_assertThisInitialized(_this), \"truncateStart\", function (truncationOffset) {\n      var truncatedText = _this.fullText;\n      var leadingText = '';\n      var combinedText = function combinedText() {\n        return leadingText + truncatedText;\n      };\n      if (truncationOffset) {\n        var _splitText$at3 = splitText(_this.fullText).at(truncationOffset);\n        var _splitText$at4 = _slicedToArray(_splitText$at3, 2);\n        leadingText = _splitText$at4[0];\n        truncatedText = _splitText$at4[1];\n        var widthCheck = leadingText + _this.ellipsis;\n        if (_this.checkTruncationOffsetWidth(widthCheck) === false) {\n          truncatedText = leadingText;\n          leadingText = '';\n        }\n      }\n\n      // Get text width ratio width accounting for any truncation offset text,\n      // and guesstimate an initial truncated string\n      _this.setTextWidthRatio(truncatedText, leadingText);\n      truncatedText = _this.getTextFromRatio(truncatedText, 'start');\n      leadingText += _this.ellipsis;\n      _this.setTextToCheck(combinedText());\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = removeFirstCharacter(truncatedText);\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateEnd\", function (truncationOffset) {\n      var truncatedText = _this.fullText;\n      var trailingText = '';\n      var combinedText = function combinedText() {\n        return truncatedText + trailingText;\n      };\n      if (truncationOffset) {\n        var index = _this.fullText.length - truncationOffset;\n        var _splitText$at5 = splitText(_this.fullText).at(index);\n        var _splitText$at6 = _slicedToArray(_splitText$at5, 2);\n        truncatedText = _splitText$at6[0];\n        trailingText = _splitText$at6[1];\n        var widthCheck = _this.ellipsis + trailingText;\n        if (_this.checkTruncationOffsetWidth(widthCheck) === false) {\n          truncatedText = trailingText;\n          trailingText = '';\n        }\n      }\n\n      // Get text width ratio width accounting for any truncation offset text,\n      // and guesstimate an initial truncated string\n      _this.setTextWidthRatio(truncatedText, trailingText);\n      truncatedText = _this.getTextFromRatio(truncatedText, 'end');\n      trailingText = _this.ellipsis + trailingText;\n      _this.setTextToCheck(combinedText());\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = removeLastCharacter(truncatedText);\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateStartEndAtPosition\", function (truncationPosition) {\n      // Split the text from the anchor position, using the width ratio\n      // to get the starting and ending indices from the position\n      _this.setTextWidthRatio();\n      var characterRatio = Math.floor(_this.fullText.length * _this.widthRatio / 2);\n      var truncateStart = truncationPosition - characterRatio;\n      var truncateEnd = truncationPosition + characterRatio;\n\n      // If either of the approximate start/end truncation indices go beyond the\n      // bounds of the actual text, we can simply use end or start truncation instead\n      if (truncateStart < 0) {\n        return _this.truncateEnd();\n      }\n      if (truncateEnd >= _this.fullText.length) {\n        return _this.truncateStart();\n      }\n      var truncatedText = _this.fullText.substring(truncateStart, truncateEnd);\n      var combinedText = function combinedText() {\n        return _this.ellipsis + truncatedText + _this.ellipsis;\n      };\n      _this.setTextToCheck(combinedText());\n      var alternating;\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = alternating ? removeLastCharacter(truncatedText) : removeFirstCharacter(truncatedText);\n        alternating = !alternating;\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateStartEndAtMiddle\", function () {\n      var middlePosition = Math.floor(_this.fullText.length / 2);\n      return _this.truncateStartEndAtPosition(middlePosition);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateMiddle\", function () {\n      var middlePosition = Math.floor(_this.fullText.length / 2);\n      var _splitText$at7 = splitText(_this.fullText).at(middlePosition),\n        _splitText$at8 = _slicedToArray(_splitText$at7, 2),\n        firstHalf = _splitText$at8[0],\n        secondHalf = _splitText$at8[1];\n      _this.setTextWidthRatio();\n      firstHalf = _this.getTextFromRatio(firstHalf, 'end');\n      secondHalf = _this.getTextFromRatio(secondHalf, 'start');\n      var combinedText = function combinedText() {\n        return firstHalf + _this.ellipsis + secondHalf;\n      };\n      _this.setTextToCheck(combinedText());\n      var alternating;\n      while (_this.textWidth > _this.availableWidth) {\n        alternating = !alternating;\n        if (alternating) {\n          firstHalf = removeLastCharacter(firstHalf);\n        } else {\n          secondHalf = removeFirstCharacter(secondHalf);\n        }\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _this.fullText = fullText;\n    _this.ellipsis = ellipsis;\n    _this.availableWidth = _availableWidth;\n    return _this;\n  }\n  _createClass(TruncationUtils, [{\n    key: \"textWidth\",\n    get: function get() {\n      if (this.debugPerformance) {\n        this.debugCounter++;\n      }\n      return _get(_getPrototypeOf(TruncationUtils.prototype), \"textWidth\", this);\n    }\n  }]);\n  return TruncationUtils;\n}(CanvasTextUtils);\n\n/**\n * DRY character/substring utils\n */\n\nvar removeLastCharacter = function removeLastCharacter(text) {\n  return text.substring(0, text.length - 1);\n};\nvar removeFirstCharacter = function removeFirstCharacter(text) {\n  return text.substring(1);\n};\nvar splitText = function splitText(text) {\n  return {\n    at: function at(index) {\n      return [text.substring(0, index), text.substring(index)];\n    }\n  };\n};","map":{"version":3,"names":["_excluded","_typeof","obj","Symbol","iterator","constructor","prototype","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","Array","from","test","len","length","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","isArray","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","_createClass","protoProps","staticProps","_get","Reflect","get","bind","property","receiver","base","_superPropBase","desc","getOwnPropertyDescriptor","arguments","apply","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_defineProperty","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","CanvasTextUtils","TruncationUtils","_CanvasTextUtils","_super","_ref","_this","fullText","ellipsis","_availableWidth","availableWidth","rest","text","textToOffset","setTextToCheck","textWidth","widthRatio","type","characterRatio","Math","ceil","index","_splitText$at","splitText","at","_splitText$at2","end","start","truncation","textToCheck","concat","console","error","truncationOffset","truncatedText","leadingText","combinedText","_splitText$at3","_splitText$at4","widthCheck","checkTruncationOffsetWidth","setTextWidthRatio","getTextFromRatio","removeFirstCharacter","trailingText","_splitText$at5","_splitText$at6","removeLastCharacter","truncationPosition","floor","truncateStart","truncateEnd","substring","alternating","middlePosition","truncateStartEndAtPosition","_splitText$at7","_splitText$at8","firstHalf","secondHalf","debugPerformance","debugCounter"],"sources":["/home/runner/work/broadway-lite/broadway-lite/node_modules/@elastic/eui/es/components/text_truncate/utils.js"],"sourcesContent":["var _excluded = [\"fullText\", \"ellipsis\", \"availableWidth\"];\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\nimport { CanvasTextUtils } from '../../services/canvas';\n/**\n * Utilities for truncating types at various positions, as well as\n * determining whether truncation is possible or even necessary.\n */\nexport var TruncationUtils = /*#__PURE__*/function (_CanvasTextUtils) {\n  _inherits(TruncationUtils, _CanvasTextUtils);\n  var _super = _createSuper(TruncationUtils);\n  function TruncationUtils(_ref) {\n    var _this;\n    var fullText = _ref.fullText,\n      ellipsis = _ref.ellipsis,\n      _availableWidth = _ref.availableWidth,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, TruncationUtils);\n    _this = _super.call(this, rest);\n    _defineProperty(_assertThisInitialized(_this), \"fullText\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"ellipsis\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"availableWidth\", void 0);\n    /**\n     * Performance utilities\n     */\n    _defineProperty(_assertThisInitialized(_this), \"debugPerformance\", false);\n    _defineProperty(_assertThisInitialized(_this), \"debugCounter\", 0);\n    /**\n     * Internal utils for calculating a ratio based on the passed available width\n     * vs the full text width.\n     * This ratio is used to get an initial _approximate_ text string that should\n     * be slightly over the available width, which we can then remove from\n     * character-by-character until the text just fits within the available width.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"widthRatio\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"setTextWidthRatio\", function () {\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.fullText;\n      var textToOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      // Account for reduced available width due to (e.g.) truncation offset\n      var availableWidth = _this.availableWidth;\n      if (textToOffset) {\n        _this.setTextToCheck(textToOffset);\n        availableWidth = availableWidth - _this.textWidth;\n      }\n      _this.setTextToCheck(text);\n      _this.widthRatio = availableWidth / _this.textWidth;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getTextFromRatio\", function (text, type) {\n      var characterRatio = Math.ceil(text.length * _this.widthRatio);\n      var index = type === 'start' ? text.length - characterRatio : characterRatio;\n      var _splitText$at = splitText(text).at(index),\n        _splitText$at2 = _slicedToArray(_splitText$at, 2),\n        end = _splitText$at2[0],\n        start = _splitText$at2[1];\n      return type === 'start' ? start : end;\n    });\n    /**\n     * Early return checks\n     */\n    _defineProperty(_assertThisInitialized(_this), \"checkIfTruncationIsNeeded\", function () {\n      _this.setTextToCheck(_this.fullText);\n      if (_this.availableWidth >= _this.textWidth) {\n        return false;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"checkSufficientEllipsisWidth\", function (truncation) {\n      var textToCheck = truncation === 'startEnd' ? \"\".concat(_this.ellipsis, \" \").concat(_this.ellipsis) // startEnd needs a little more space\n      : _this.ellipsis;\n      _this.setTextToCheck(textToCheck);\n      if (_this.textWidth >= _this.availableWidth * 0.9) {\n        console.error('The truncation ellipsis is larger than the available width. No text can be rendered.');\n        return false;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"checkTruncationOffsetWidth\", function (text) {\n      _this.setTextToCheck(text);\n      if (_this.textWidth > _this.availableWidth) {\n        console.error('The passed truncationOffset is too large for the available width. Truncating the offset instead.');\n        return false;\n      }\n    });\n    /**\n     * Truncation types logic. This is where the magic happens\n     */\n    _defineProperty(_assertThisInitialized(_this), \"truncateStart\", function (truncationOffset) {\n      var truncatedText = _this.fullText;\n      var leadingText = '';\n      var combinedText = function combinedText() {\n        return leadingText + truncatedText;\n      };\n      if (truncationOffset) {\n        var _splitText$at3 = splitText(_this.fullText).at(truncationOffset);\n        var _splitText$at4 = _slicedToArray(_splitText$at3, 2);\n        leadingText = _splitText$at4[0];\n        truncatedText = _splitText$at4[1];\n        var widthCheck = leadingText + _this.ellipsis;\n        if (_this.checkTruncationOffsetWidth(widthCheck) === false) {\n          truncatedText = leadingText;\n          leadingText = '';\n        }\n      }\n\n      // Get text width ratio width accounting for any truncation offset text,\n      // and guesstimate an initial truncated string\n      _this.setTextWidthRatio(truncatedText, leadingText);\n      truncatedText = _this.getTextFromRatio(truncatedText, 'start');\n      leadingText += _this.ellipsis;\n      _this.setTextToCheck(combinedText());\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = removeFirstCharacter(truncatedText);\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateEnd\", function (truncationOffset) {\n      var truncatedText = _this.fullText;\n      var trailingText = '';\n      var combinedText = function combinedText() {\n        return truncatedText + trailingText;\n      };\n      if (truncationOffset) {\n        var index = _this.fullText.length - truncationOffset;\n        var _splitText$at5 = splitText(_this.fullText).at(index);\n        var _splitText$at6 = _slicedToArray(_splitText$at5, 2);\n        truncatedText = _splitText$at6[0];\n        trailingText = _splitText$at6[1];\n        var widthCheck = _this.ellipsis + trailingText;\n        if (_this.checkTruncationOffsetWidth(widthCheck) === false) {\n          truncatedText = trailingText;\n          trailingText = '';\n        }\n      }\n\n      // Get text width ratio width accounting for any truncation offset text,\n      // and guesstimate an initial truncated string\n      _this.setTextWidthRatio(truncatedText, trailingText);\n      truncatedText = _this.getTextFromRatio(truncatedText, 'end');\n      trailingText = _this.ellipsis + trailingText;\n      _this.setTextToCheck(combinedText());\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = removeLastCharacter(truncatedText);\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateStartEndAtPosition\", function (truncationPosition) {\n      // Split the text from the anchor position, using the width ratio\n      // to get the starting and ending indices from the position\n      _this.setTextWidthRatio();\n      var characterRatio = Math.floor(_this.fullText.length * _this.widthRatio / 2);\n      var truncateStart = truncationPosition - characterRatio;\n      var truncateEnd = truncationPosition + characterRatio;\n\n      // If either of the approximate start/end truncation indices go beyond the\n      // bounds of the actual text, we can simply use end or start truncation instead\n      if (truncateStart < 0) {\n        return _this.truncateEnd();\n      }\n      if (truncateEnd >= _this.fullText.length) {\n        return _this.truncateStart();\n      }\n      var truncatedText = _this.fullText.substring(truncateStart, truncateEnd);\n      var combinedText = function combinedText() {\n        return _this.ellipsis + truncatedText + _this.ellipsis;\n      };\n      _this.setTextToCheck(combinedText());\n      var alternating;\n      while (_this.textWidth > _this.availableWidth) {\n        truncatedText = alternating ? removeLastCharacter(truncatedText) : removeFirstCharacter(truncatedText);\n        alternating = !alternating;\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateStartEndAtMiddle\", function () {\n      var middlePosition = Math.floor(_this.fullText.length / 2);\n      return _this.truncateStartEndAtPosition(middlePosition);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"truncateMiddle\", function () {\n      var middlePosition = Math.floor(_this.fullText.length / 2);\n      var _splitText$at7 = splitText(_this.fullText).at(middlePosition),\n        _splitText$at8 = _slicedToArray(_splitText$at7, 2),\n        firstHalf = _splitText$at8[0],\n        secondHalf = _splitText$at8[1];\n      _this.setTextWidthRatio();\n      firstHalf = _this.getTextFromRatio(firstHalf, 'end');\n      secondHalf = _this.getTextFromRatio(secondHalf, 'start');\n      var combinedText = function combinedText() {\n        return firstHalf + _this.ellipsis + secondHalf;\n      };\n      _this.setTextToCheck(combinedText());\n      var alternating;\n      while (_this.textWidth > _this.availableWidth) {\n        alternating = !alternating;\n        if (alternating) {\n          firstHalf = removeLastCharacter(firstHalf);\n        } else {\n          secondHalf = removeFirstCharacter(secondHalf);\n        }\n        _this.setTextToCheck(combinedText());\n      }\n      return combinedText();\n    });\n    _this.fullText = fullText;\n    _this.ellipsis = ellipsis;\n    _this.availableWidth = _availableWidth;\n    return _this;\n  }\n  _createClass(TruncationUtils, [{\n    key: \"textWidth\",\n    get: function get() {\n      if (this.debugPerformance) {\n        this.debugCounter++;\n      }\n      return _get(_getPrototypeOf(TruncationUtils.prototype), \"textWidth\", this);\n    }\n  }]);\n  return TruncationUtils;\n}(CanvasTextUtils);\n\n/**\n * DRY character/substring utils\n */\n\nvar removeLastCharacter = function removeLastCharacter(text) {\n  return text.substring(0, text.length - 1);\n};\nvar removeFirstCharacter = function removeFirstCharacter(text) {\n  return text.substring(1);\n};\nvar splitText = function splitText(text) {\n  return {\n    at: function at(index) {\n      return [text.substring(0, index), text.substring(index)];\n    }\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}